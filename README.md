# Задание 1. Разработка проверочного листа по безопасности данных

### 1. Анализ диаграммы и описание системы PropDevelopment

### Классификация данных по категориям
### Публичные данные:
#### Описание: 
Данные, которые доступны всем пользователям и не требуют защиты.
#### Примеры данных:
* Информация о жилых комплексах (описание, планировки, цены).
* Общая информация о компании (новости, акции, контакты).
* Публичные данные о ремонтных работах (графики, общие сведения).

### Внутренние данные:
#### Описание: 
Данные, которые используются внутри компании и не предназначены для публичного доступа.

#### Примеры данных:

* Внутренние отчёты и аналитика.
* Данные о сотрудниках (рабочие контакты, должности).
* Внутренние процессы и политики компании.

### Конфиденциальные данные:
#### Описание: 
Данные, которые требуют защиты, так как их утечка может нанести ущерб компании или клиентам.
#### Примеры данных:
* Персональные данные клиентов (Ф. И. О., контактные данные, паспортные данные).
* Данные о сделках (договоры, платежи).
* Данные о собственниках (личные кабинеты, история платежей за ЖКУ).

### Секретные данные:
#### Описание: 
Данные, которые требуют максимальной защиты, так как их утечка может привести к серьёзным последствиям для компании.

#### Примеры данных:
* Ключи доступа к системам.
* Данные о внутренней архитектуре и инфраструктуре.
* Данные о партнёрских интеграциях (API-ключи, контракты).

### 2. Определение рисков для каждой категории данных
#### Публичные данные:
* Риск: Потеря части и искажение данных.
* Обоснование: Публичные данные могут быть изменены злоумышленниками, что приведёт к потере доверия клиентов.
* Оценка риска: Значительный.

#### Внутренние данные:
* Риск: Утечка данных.
* Обоснование: Утечка внутренних данных может привести к утечке информации о внутренних процессах компании, что может быть использовано конкурентами.
* Оценка риска: Значительный.

#### Конфиденциальные данные:
* Риск: Утечка данных.
* Обоснование: Утечка персональных данных клиентов может привести к юридическим последствиям и потере доверия клиентов.
* Оценка риска: Критический.

#### Секретные данные:
* Риск: Утечка данных.
* Обоснование: Утечка секретных данных может привести к компрометации всей системы безопасности компании.
* Оценка риска: Критический.

[Визуализуализация результатов анализа в виде mindmap](https://drive.google.com/file/d/1TGAv6q9T0bc-TDUQ8WUhGv5CVSgxMDtu/view?usp=sharing)


### 3. Рекомендации по улучшению безопасности данных
#### 1) Усиление контроля доступа:

* Внедрение многофакторной аутентификации для доступа к конфиденциальным и секретным данным.
* Регулярный аудит прав доступа сотрудников.

#### 2) Шифрование данных:

* Шифрование данных при передаче и хранении, особенно для конфиденциальных и секретных данных.
* Регулярное обучение сотрудников:

#### 3) Проведение тренингов по безопасности данных для всех сотрудников, особенно для операционных команд.

* Мониторинг и аудит:

* Внедрение систем мониторинга для обнаружения подозрительной активности.

* Регулярный аудит безопасности данных и процессов.

4) Управление инцидентами:

* Разработка плана реагирования на инциденты, связанные с утечкой данных.

* Создание команды быстрого реагирования на инциденты.

5) Соблюдение законодательства:

* Проверка всех бизнес-процессов на соответствие законодательным нормам, включая GDPR и ФЗ-152.




# Задание 2. Разработка и заполнение проверочного листа для бизнес-систем

#### 1. Анализ системы и идентификация ключевых систем
На основе схемы и описания системы PropDevelopment, можно выделить следующие ключевые системы и их взаимодействие:

#### Группа сервисов для продаж:

- Витрина продаж.

- Приложение для онлайн-тура (client-tour-app).

- Приложение для онлайн-сделки (client-mart-app).

- Система управления клиентскими данными (client-crm-app).

- Приложение для управления данными о недвижимости (client-mart-estate-app).

#### Группа сервисов ЖКУ:

- Витрина для собственников.

- Сервис для предоставления услуг (tenant-core-app).

- CRM для управления данными о собственниках.

#### Финансы:

- Система финансового учёта (accountant-service-1).

- Служба каталогов.

#### Данные:

- Хранилище данных.

- BI и отчётность.


#### 2. Проблемы и приоритеты компании
##### Основные проблемы компании:

- Нарушен контроль данных: Нет системного контроля за передачей данных между IT-продуктами.

- Проблемы с API партнёров: Нет единых политик по безопасности и системного контроля за передаваемыми данными.

- Утечка данных: Недавний инцидент у конкурента вызвал обеспокоенность руководства.

- Соответствие законодательству: Нет уверенности в том, что все бизнес-процессы соответствуют законодательным нормам.

##### Приоритеты компании:

- Повышение уровня удовлетворённости клиентов.

- Расширение направления обработки данных.

- Предотвращение утечек данных.

- Соответствие требованиям законодательства.


3. Выбор разделов для проверочного листа
Исходя из проблем и приоритетов компании, в проверочный лист безопасности для бизнес-систем следует включить следующие разделы:

###### I.Управление доступом:

- Контроль доступа к критическим системам и данным.

- Управление учётными записями и привилегиями.

- Журналирование операций доступа.

###### II.Безопасность данных:

- Классификация данных и управление доступом на основе классификации.

- Шифрование данных при передаче и хранении.

- Резервное копирование и восстановление данных.

- Управление ключами шифрования.

###### III.Защита инфраструктуры:

- Сегментация сети и использование межсетевых экранов.

- Мониторинг сетевого трафика и обнаружение аномалий.

- Сканирование уязвимостей и обновление систем.

###### IV.Управление инцидентами:

- Мониторинг и оповещение о подозрительной активности.

- План реагирования на инциденты.

- Регулярные аудиты безопасности.

###### V.Специфические аспекты:

- Управление мобильными устройствами (MDM).

- Безопасный удалённый доступ (VPN).

- Контроль доступа к облачным ресурсам.


Проверочный лист приведен в файле /Task2/IB.md

##### Обоснование выбора разделов
**Управление доступом:** Этот раздел критически важен для предотвращения несанкционированного доступа к данным и системам, что напрямую связано с проблемой утечки данных.

**Безопасность данных:** Классификация данных, шифрование и резервное копирование помогут предотвратить потерю и утечку данных, а также обеспечить соответствие законодательству.

**Защита инфраструктуры:** Сегментация сети и мониторинг трафика помогут предотвратить атаки и обеспечить безопасность данных.

**Управление инцидентами:** План реагирования на инциденты и регулярные учения помогут компании быстро реагировать на кибератаки и минимизировать ущерб.

**Специфические аспекты:** Управление мобильными устройствами и безопасный удалённый доступ важны для защиты данных в условиях гибридной работы и использования облачных ресурсов.



# Задание 3. Внешние интеграции
Необходимо добавить в систему новые сервисы «Умный дом» и представить диаграмму контекста c4 и доработанную диаграмму контейнеров. Сформировать список требований к внешним интеграциям.

[Диаграмма контекста c4](https://drive.google.com/file/d/1N_PqAUTLNagB4kBx6XSPGW4ol22sY3M5/view?usp=sharing)

[Диаграмма контейнеров](https://drive.google.com/file/d/1f93hjLQULw1XMuIRlDJo7v6Bv5UaU_3r/view?usp=sharing)

#### Список требований к внешним интеграциям
##### Требования к безопасности:
###### 1.Шифрование данных:

* Все данные, передаваемые между системами, должны быть зашифрованы с использованием протоколов TLS/SSL.

* Данные, хранящиеся на стороне партнёра, должны быть зашифрованы.

###### 2.Аутентификация и авторизация:

* Использование OAuth 2.0 для аутентификации и авторизации.

* Токены доступа должны иметь ограниченный срок действия.

* Реализация механизма refresh token для обновления токенов.

###### 3.Контроль доступа:

* Ограничение доступа к API партнёрской платформы на основе ролей и разрешений.

* Реализация механизма проверки прав доступа для каждого запроса.

###### 4.Аудит и мониторинг:

* Ведение логов всех запросов и ответов для последующего аудита.

* Реализация мониторинга для обнаружения подозрительной активности.

#### Протоколы аутентификации и авторизации:
###### 1.OAuth 2.0:

* Использование протокола OAuth 2.0 для аутентификации и авторизации.

* Токены доступа должны быть подписаны с использованием JWT (JSON Web Token).

###### 2.OpenID Connect:

* Использование OpenID Connect для аутентификации пользователей через мобильное приложение.

##### Организация взаимодействия между системами:
###### 1.REST API:

* Взаимодействие между мобильным приложением и сервисом интеграции «Умный дом» будет осуществляться через REST API.

* Сервис интеграции будет взаимодействовать с партнёрской платформой через REST API.

###### 2.Асинхронное взаимодействие:

* Для обработки событий (например, открытие двери или шлагбаума) может быть использована асинхронная модель взаимодействия через message broker (например, Kafka или RabbitMQ).

###### 3.Синхронизация данных:

* Регулярная синхронизация данных между CRM и партнёрской платформой для обновления информации о пользователях и их доступах.

###### 4.Обработка ошибок:

* Реализация механизма повторных запросов в случае сбоев.

* Логирование всех ошибок для последующего анализа.

**Диаграмма контекста** /Task3/PropDevelopment_С4_context.drawio 
#
**Диаграмма контейнеров** /Task3/PropDevelopment_С4_container.drawio
#
**Требования к безопасности и интеграции** включают шифрование данных, использование OAuth 2.0, контроль доступа и организацию взаимодействия через REST API и асинхронные механизмы.

# Задание 4. Защита доступа к кластеру Kubernetes
Необходимо определить роли и их полномочия при работе с Kubernetes.
Подготовить скрипты для создания пользователей.
Подготовить скрипты, чтобы создать роли.
Подготовить скрипты, чтобы связать пользователей с ролями.


##### Роли и их полномочия
Роли и их полномочия определены в таблице в файле **/Task4/roles.md** 

#### Описание ролей:
#### cluster-viewer:

* Полномочия: Просмотр ресурсов (например, pods, services, deployments).

* Группа пользователей: Пользователи, которым нужен доступ только для чтения (например, аналитики, наблюдатели).

#### cluster-editor:

* Полномочия: Просмотр и изменение ресурсов (создание, обновление, удаление).

* Группа пользователей: Пользователи, которые настраивают и управляют ресурсами кластера (например, разработчики, инженеры).

#### cluster-admin:

* Полномочия: Полный доступ ко всем ресурсам, включая секреты и привилегированные действия.

* Группа пользователей: Администраторы, которые управляют кластером и имеют полный контроль.

#### Пользователи
Создаданы два пользователя:

* user-viewer — для группы с доступом только на чтение.
* user-editor — для группы с доступом на настройку кластера.

Скрипт в файле **/Task4/users-create.sh**

#### Роли
Роли cluster-viewer, cluster-editor и cluster-admin созданы в скрипте **/Task4/role-create.sh**

#### Связывание пользователей с ролями 

Пользователи связаны с ролями через RoleBinding и ClusterRoleBinding в скрипте **/Task4/role-binding.sh**

# Задание 5. Управление трафиком внутри кластера Kubertnetes

В этом задании необходимо разграничить трафик между сервисами, которые развёрнуты в кластере Kubernetes:
* необходимо добавить новый сервис (pod) и запретить другим подам с ним взаимодействовать.
* Необходимо изолировать трафик к новому сервису от других подов.

Итоговый файл с сетевыми политиками **/Task5/non-admin-api-allow.yaml**

###### Созданы четыре сервиса с метками:

* front-end
* back-end-api

* admin-front-end
* admin-back-end-api

###### Созданы и применены сетевые политики, которые разрешают трафик только между:

* front-end и back-end-api
* admin-front-end и admin-back-end-api


Проверка трафика между front-end и back-end-api:

```bash
kubectl run test-front-end --rm -i -t --image=alpine --labels role=front-end -- sh
/ # wget -qO- --timeout=2 http://back-end-api-app
```

Проверка трафика между admin-front-end и admin-back-end-api:

```bash
kubectl run test-front-end --rm -i -t --image=alpine --labels role=admin-front-end -- sh
/ # wget -qO- --timeout=2 http://admin-back-end-api-app
```

Ожидаемый результат: трафик должен быть разрешён.


Проверка трафика между test-front-end и back-end-api:

```bash
kubectl run test-front-end --rm -i -t --image=alpine -- sh
/ # wget -qO- --timeout=2 http://back-end-api-app
```

Проверка трафика между test-admin-front-end и admin-back-end-api:

```bash
kubectl run test-front-end --rm -i -t --image=alpine -- sh
/ # wget -qO- --timeout=2 http://admin-back-end-api-app
```
Ожидаемый результат: трафик должен быть запрещён, ошибка тайм-аута.


Проверено, что трафик между другими сервисами, без установленных меток запрещён.

